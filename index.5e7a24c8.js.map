{"mappings":"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","sources":["src/index.js"],"sourcesContent":["const API_KEY = '36866998-5308da28c55e509481910204f';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst ITEMS_PER_PAGE = 40;\n\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nlet isLoading = false; \nlet isEndOfResults = false; \n\nsearchForm.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  const searchQuery = e.target.elements.searchQuery.value.trim();\n\n  if (searchQuery === '') {\n    return;\n  }\n\n  currentQuery = searchQuery;\n  currentPage = 1;\n  gallery.innerHTML = '';\n  gallery.classList.add('empty');\n\n  await fetchImages();\n});\n\n\nconst observer = new IntersectionObserver(async (entries) => {\n  \n  if (entries[0].isIntersecting && !isLoading && !isEndOfResults) {\n    await fetchImages();\n  }\n});\n\nasync function fetchImages() {\n  isLoading = true;\n\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: currentQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: ITEMS_PER_PAGE,\n    page: currentPage,\n  });\n\n  try {\n    const response = await axios.get(`${BASE_URL}?${params}`);\n    const data = response.data;\n\n    if (data.hits.length === 0) {\n      showErrorMessage('На жаль, немає зображень, що відповідають вашому пошуковому запиту. Будь ласка, спробуйте ще раз.');\n      isEndOfResults = true;\n      gallery.classList.remove('empty');\n      return;\n    }\n\n    if (currentPage === 1) {\n      const totalHits = data.totalHits;\n      showInfoMessage(`Hooray! We found ${totalHits} images.`);\n    }\n\n    data.hits.forEach((image) => {\n      const photoCard = createPhotoCard(image);\n      gallery.appendChild(photoCard);\n    });\n\n    if (data.totalHits <= currentPage * ITEMS_PER_PAGE) {\n      isEndOfResults = true;\n      showInfoMessage('На жаль, ви досягли кінця результатів пошуку.');\n    } else {\n      currentPage++;\n     \n      observer.observe(gallery.lastElementChild);\n    }\n  } catch (error) {\n    console.error(error);\n    showErrorMessage('Сталася помилка під час отримання зображень. Будь ласка, спробуйте ще раз пізніше.');\n  }\n\n  isLoading = false;\n}\n\nfunction createPhotoCard(image) {\n  const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n\n  const photoCard = document.createElement('div');\n  photoCard.classList.add('photo-card');\n\n  const img = document.createElement('img');\n  img.src = webformatURL;\n  img.alt = tags;\n  img.loading = 'lazy';\n\n  const info = document.createElement('div');\n  info.classList.add('info');\n\n  const likesInfo = createInfoItem('Likes', likes);\n  const viewsInfo = createInfoItem('Views', views);\n  const commentsInfo = createInfoItem('Comments', comments);\n  const downloadsInfo = createInfoItem('Downloads', downloads);\n\n  info.append(likesInfo, viewsInfo, commentsInfo, downloadsInfo);\n\n  photoCard.append(img, info);\n\n  img.addEventListener('click', () => {\n    openImageModal(largeImageURL, tags);\n  });\n\n  return photoCard;\n}\n\nfunction createInfoItem(label, value) {\n  const infoItem = document.createElement('p');\n  infoItem.classList.add('info-item');\n  infoItem.innerHTML = `<b>${label}: </b>${value}`;\n\n  return infoItem;\n}\n\nfunction openImageModal(imageUrl, altText) {\n  const modal = document.createElement('div');\n  modal.classList.add('modal');\n\n  const modalContent = document.createElement('div');\n  modalContent.classList.add('modal-content');\n\n  const img = document.createElement('img');\n  img.src = imageUrl;\n  img.alt = altText;\n\n  modalContent.appendChild(img);\n  modal.appendChild(modalContent);\n\n  document.body.appendChild(modal);\n\n  modal.addEventListener('click', () => {\n    document.body.removeChild(modal);\n  });\n}\n\nfunction showErrorMessage(message) {\n  Notiflix.Notify.Failure(message);\n}\n\nfunction showInfoMessage(message) {\n  Notiflix.Notify.Info(message);\n}"],"names":["$1f0dc3b9307be026$var$searchForm","document","getElementById","$1f0dc3b9307be026$var$gallery","querySelector","$1f0dc3b9307be026$var$currentPage","$1f0dc3b9307be026$var$currentQuery","$1f0dc3b9307be026$var$isLoading","$1f0dc3b9307be026$var$isEndOfResults","addEventListener","async","e","preventDefault","searchQuery","target","elements","value","trim","innerHTML","classList","add","$1f0dc3b9307be026$var$fetchImages","$1f0dc3b9307be026$var$observer","IntersectionObserver","entries","isIntersecting","params","URLSearchParams","key","q","image_type","orientation","safesearch","per_page","page","data","axios","get","hits","length","$1f0dc3b9307be026$var$showErrorMessage","remove","$1f0dc3b9307be026$var$showInfoMessage","totalHits","forEach","image","photoCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","createElement","img","src","alt","loading","info","likesInfo","$1f0dc3b9307be026$var$createInfoItem","viewsInfo","commentsInfo","downloadsInfo","append","imageUrl","altText","modal","modalContent","appendChild","body","removeChild","$1f0dc3b9307be026$var$openImageModal","$1f0dc3b9307be026$var$createPhotoCard","observe","lastElementChild","error","console","label","infoItem","message","Notiflix","Notify","Failure","Info"],"version":3,"file":"index.5e7a24c8.js.map"}